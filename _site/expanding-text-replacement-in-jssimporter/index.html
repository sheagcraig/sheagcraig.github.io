<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Expanding Text Replacement in JSSImporter &#8211; Taco Destroyer</title>
<meta name="description" content="After some PR’s and ideas tossed around with other admins using JSSImporter, it
became pretty clear that there are a lot of creative uses of JSSImporter that
the original code doesn’t make very easy, or possible, without some hacking.

">
<meta name="keywords" content="">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="Expanding Text Replacement in JSSImporter">
<meta name="twitter:description" content="After some PR’s and ideas tossed around with other admins using JSSImporter, it
became pretty clear that there are a lot of creative uses of JSSImporter that
the original code doesn’t make very easy, or possible, without some hacking.

">
<meta name="twitter:site" content="@shea_craig">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Expanding Text Replacement in JSSImporter">
<meta property="og:description" content="After some PR’s and ideas tossed around with other admins using JSSImporter, it
became pretty clear that there are a lot of creative uses of JSSImporter that
the original code doesn’t make very easy, or possible, without some hacking.

">
<meta property="og:url" content="/expanding-text-replacement-in-jssimporter/">
<meta property="og:site_name" content="Taco Destroyer">

<meta property="og:image" content="/images/default-thumb.png">






<link rel="canonical" href="/expanding-text-replacement-in-jssimporter/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Taco Destroyer Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">Taco Destroyer</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Sample Posts</a></li>
				
				    
				        
				    
				    <li><a href="/theme-setup/" >Theme Setup</a></li>
				
				    
				        
				        
				    <li><a href="http://mademistakes.com" target="_blank">Made Mistakes</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  

<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/" class="bio-photo" alt=" bio photo">


  <h3 itemprop="name"></h3>
  <p></p>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/expanding-text-replacement-in-jssimporter/" rel="bookmark" title="Expanding Text Replacement in JSSImporter">Expanding Text Replacement in JSSImporter</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>After some PR’s and ideas tossed around with other admins using JSSImporter, it
became pretty clear that there are a lot of creative uses of JSSImporter that
the original code doesn’t make very easy, or possible, without some hacking.</p>

<p>One big change that comes with JSSImporter 0.3.8 is that it allows you to use
any string-type AutoPkg environment variable in your template text
substitutions.</p>

<p>To use a variable for text substitution, just wrap it in %’s in the template
file. For example, if I wanted to include the value of AUTOPKG_VERSION as part
of a description in my policy template, I could do this (only the relevant
parts of the XML are included for brevity!)</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;description&gt;</span>Built with AutoPkg version %AUTOPKG_VERSION% for your pleasure!<span class="nt">&lt;/description&gt;</span></code></pre></div>

<p>One thing that many people don’t realize is that AutoPkg doesn’t freak out if
you add arguments or input variables to your recipe that don’t “exist”. You can
use this to fill arguments to the JSSImporter as well as templates; you don’t
necessarily need an argument for every conceivable setting. For example, say I
want to have a second smart group scoped in my policy, but I want the name to
be overrideable with input variables.</p>

<p>First I would add a new input variable named something appropriately:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;description&gt;</span>Built with AutoPkg version %AUTOPKG_VERSION% for your pleasure!<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;key&gt;</span>Input<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>SecondGroupName<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;string&gt;</span>SuperTesters<span class="nt">&lt;/string&gt;</span>
    ...</code></pre></div>

<p>Then, later, in the JSSImporter arguments, in the groups array, I could have my
second group use it:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;key&gt;</span>groups<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;array&gt;</span>
        <span class="nt">&lt;dict&gt;</span>
            <span class="nt">&lt;key&gt;</span>name<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;string&gt;</span>%GROUP_NAME%<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;key&gt;</span>smart<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;true&gt;&lt;/true&gt;</span>
            <span class="nt">&lt;key&gt;</span>template_path<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;string&gt;</span>%GROUP_TEMPLATE%<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;/dict&gt;</span>
        <span class="nt">&lt;dict&gt;</span>
            <span class="nt">&lt;key&gt;</span>name<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;string&gt;</span>%SecondGroupName%<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;key&gt;</span>smart<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;true&gt;&lt;/true&gt;</span>
            <span class="nt">&lt;key&gt;</span>template_path<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;string&gt;</span>%GROUP_TEMPLATE2%<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;/dict&gt;</span>
    <span class="nt">&lt;/array&gt;</span></code></pre></div>

<p><em>and</em> I can include that somewhere in a template as well. So my policy template
could include this:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;policy&gt;</span>
        <span class="nt">&lt;general&gt;</span>
            <span class="nt">&lt;name&gt;</span>Install Latest %PROD_NAME%<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;frequency&gt;</span>Ongoing<span class="nt">&lt;/frequency&gt;</span>
            <span class="nt">&lt;category&gt;</span>
                <span class="nt">&lt;name&gt;</span>%POLICY_CATEGORY%<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;/general&gt;</span>
        <span class="nt">&lt;scope&gt;</span> 
            
        <span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;package_configuration&gt;</span>
            
        <span class="nt">&lt;/package_configuration&gt;</span>
        <span class="nt">&lt;scripts&gt;</span>
            
        <span class="nt">&lt;/scripts&gt;</span>
        <span class="nt">&lt;self_service&gt;</span>
            <span class="nt">&lt;use_for_self_service&gt;</span>true<span class="nt">&lt;/use_for_self_service&gt;</span>
            <span class="nt">&lt;install_button_text&gt;</span>Install %VERSION%<span class="nt">&lt;/install_button_text&gt;</span>
            <span class="nt">&lt;self_service_description&gt;</span>%SELF_SERVICE_DESCRIPTION%<span class="nt">&lt;/self_service_description&gt;</span>
        <span class="nt">&lt;/self_service&gt;</span>
        <span class="nt">&lt;maintenance&gt;</span>
            <span class="nt">&lt;recon&gt;</span>true<span class="nt">&lt;/recon&gt;</span>
        <span class="nt">&lt;/maintenance&gt;</span>
        <span class="nt">&lt;user_interaction&gt;</span>
            <span class="nt">&lt;message_start&gt;</span>Greetings %SecondGroupName%<span class="nt">&lt;/message_start&gt;</span>
            <span class="nt">&lt;allow_users_to_defer&gt;</span>false<span class="nt">&lt;/allow_users_to_defer&gt;</span>
            <span class="nt">&lt;allow_deferral_until_utc&gt;&lt;/allow_deferral_until_utc&gt;</span>
            <span class="nt">&lt;message_finish&gt;&lt;/message_finish&gt;</span>
        <span class="nt">&lt;/user_interaction&gt;</span>
    <span class="nt">&lt;/policy&gt;</span></code></pre></div>

<p>Granted, that’s kind of a contrived use, but it points to a way to manage a lot
of settings with a pretty flexible ability to later override things.</p>

<p>Which reminds me: Try to set all of the arguments to JSSImporter in your
recipes with input variables. This makes it a lot easier for other people to
then borrow your recipe and make it work in their environment. Indeed, once we
get it off the ground, this will be a style requirement for the “official” JSS
recipes repo… Stay tuned.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/expanding-text-replacement-in-jssimporter/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/expanding-text-replacement-in-jssimporter/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/expanding-text-replacement-in-jssimporter/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Expanding Text Replacement in JSSImporter</strong> was published on <time datetime="2015-04-01T14:54:02-04:00">April 01, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/putting-the-hopper-to-work-broken-preferences-edition/" title="Putting the Hopper to Work: Broken Preferences Edition">Putting the Hopper to Work: Broken Preferences Edition</a></li>
    
      <li><a href="/now-i-get-it-updating-mac-firmware/" title="Now I get it... Updating Mac firmware">Now I get it... Updating Mac firmware</a></li>
    
      <li><a href="/how-i-roll/" title="How I Roll">How I Roll</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2015 Shea Craig. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


  



</body>
</html>
